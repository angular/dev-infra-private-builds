"use strict";
/**
 * @license
 * Copyright Google LLC All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
Object.defineProperty(exports, "__esModule", { value: true });
exports.mergeBuiltPackagesWithInfo = void 0;
const console_1 = require("../../utils/console");
const actions_error_1 = require("./actions-error");
/** Merges the given built packages with their NPM package information. */
function mergeBuiltPackagesWithInfo(builtPackages, npmPackages) {
    return builtPackages.map((pkg) => {
        const info = npmPackages.find((i) => i.name === pkg.name);
        if (info === undefined) {
            (0, console_1.debug)(`Retrieved package information:`, npmPackages);
            (0, console_1.error)((0, console_1.red)(`  âœ˜   Could not find package information for built package: "${pkg.name}".`));
            throw new actions_error_1.FatalReleaseActionError();
        }
        return { ...pkg, ...info };
    });
}
exports.mergeBuiltPackagesWithInfo = mergeBuiltPackagesWithInfo;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWVyZ2UtYnVpbHQtcGFja2FnZXMtaW5mby5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uL25nLWRldi9yZWxlYXNlL3B1Ymxpc2gvbWVyZ2UtYnVpbHQtcGFja2FnZXMtaW5mby50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUE7Ozs7OztHQU1HOzs7QUFHSCxpREFBc0Q7QUFDdEQsbURBQXdEO0FBS3hELDBFQUEwRTtBQUMxRSxTQUFnQiwwQkFBMEIsQ0FDeEMsYUFBNkIsRUFDN0IsV0FBeUI7SUFFekIsT0FBTyxhQUFhLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxFQUFFLEVBQUU7UUFDL0IsTUFBTSxJQUFJLEdBQUcsV0FBVyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDLElBQUksS0FBSyxHQUFHLENBQUMsSUFBSSxDQUFDLENBQUM7UUFFMUQsSUFBSSxJQUFJLEtBQUssU0FBUyxFQUFFO1lBQ3RCLElBQUEsZUFBSyxFQUFDLGdDQUFnQyxFQUFFLFdBQVcsQ0FBQyxDQUFDO1lBQ3JELElBQUEsZUFBSyxFQUFDLElBQUEsYUFBRyxFQUFDLGdFQUFnRSxHQUFHLENBQUMsSUFBSSxJQUFJLENBQUMsQ0FBQyxDQUFDO1lBQ3pGLE1BQU0sSUFBSSx1Q0FBdUIsRUFBRSxDQUFDO1NBQ3JDO1FBRUQsT0FBTyxFQUFDLEdBQUcsR0FBRyxFQUFFLEdBQUcsSUFBSSxFQUFDLENBQUM7SUFDM0IsQ0FBQyxDQUFDLENBQUM7QUFDTCxDQUFDO0FBZkQsZ0VBZUMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgR29vZ2xlIExMQyBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IGFuIE1JVC1zdHlsZSBsaWNlbnNlIHRoYXQgY2FuIGJlXG4gKiBmb3VuZCBpbiB0aGUgTElDRU5TRSBmaWxlIGF0IGh0dHBzOi8vYW5ndWxhci5pby9saWNlbnNlXG4gKi9cblxuaW1wb3J0IHtCdWlsdFBhY2thZ2UsIE5wbVBhY2thZ2V9IGZyb20gJy4uL2NvbmZpZyc7XG5pbXBvcnQge2RlYnVnLCBlcnJvciwgcmVkfSBmcm9tICcuLi8uLi91dGlscy9jb25zb2xlJztcbmltcG9ydCB7RmF0YWxSZWxlYXNlQWN0aW9uRXJyb3J9IGZyb20gJy4vYWN0aW9ucy1lcnJvcic7XG5cbi8qKiBUeXBlIGRlc2NyaWJpbmcgYSBidWlsdCBwYWNrYWdlIHdpdGggaXRzIGFzc29jaWF0ZWQgTlBNIHBhY2thZ2UgaW5mby4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgQnVpbHRQYWNrYWdlV2l0aEluZm8gZXh0ZW5kcyBCdWlsdFBhY2thZ2UsIE5wbVBhY2thZ2Uge31cblxuLyoqIE1lcmdlcyB0aGUgZ2l2ZW4gYnVpbHQgcGFja2FnZXMgd2l0aCB0aGVpciBOUE0gcGFja2FnZSBpbmZvcm1hdGlvbi4gKi9cbmV4cG9ydCBmdW5jdGlvbiBtZXJnZUJ1aWx0UGFja2FnZXNXaXRoSW5mbyhcbiAgYnVpbHRQYWNrYWdlczogQnVpbHRQYWNrYWdlW10sXG4gIG5wbVBhY2thZ2VzOiBOcG1QYWNrYWdlW10sXG4pOiBCdWlsdFBhY2thZ2VXaXRoSW5mb1tdIHtcbiAgcmV0dXJuIGJ1aWx0UGFja2FnZXMubWFwKChwa2cpID0+IHtcbiAgICBjb25zdCBpbmZvID0gbnBtUGFja2FnZXMuZmluZCgoaSkgPT4gaS5uYW1lID09PSBwa2cubmFtZSk7XG5cbiAgICBpZiAoaW5mbyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICBkZWJ1ZyhgUmV0cmlldmVkIHBhY2thZ2UgaW5mb3JtYXRpb246YCwgbnBtUGFja2FnZXMpO1xuICAgICAgZXJyb3IocmVkKGAgIOKcmCAgIENvdWxkIG5vdCBmaW5kIHBhY2thZ2UgaW5mb3JtYXRpb24gZm9yIGJ1aWx0IHBhY2thZ2U6IFwiJHtwa2cubmFtZX1cIi5gKSk7XG4gICAgICB0aHJvdyBuZXcgRmF0YWxSZWxlYXNlQWN0aW9uRXJyb3IoKTtcbiAgICB9XG5cbiAgICByZXR1cm4gey4uLnBrZywgLi4uaW5mb307XG4gIH0pO1xufVxuIl19