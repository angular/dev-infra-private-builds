"use strict";
/**
 * @license
 * Copyright Google LLC All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
Object.defineProperty(exports, "__esModule", { value: true });
exports.ReleaseInfoCommandModule = void 0;
const git_client_1 = require("../../utils/git/git-client");
const index_1 = require("../config/index");
const active_release_trains_1 = require("../versioning/active-release-trains");
const print_active_trains_1 = require("../versioning/print-active-trains");
const versioning_1 = require("../versioning");
const config_1 = require("../../utils/config");
/** Yargs command handler for printing release information. */
async function handler() {
    const git = git_client_1.GitClient.get();
    const nextBranchName = (0, versioning_1.getNextBranchName)(git.config.github);
    const repo = { api: git.github, ...git.remoteConfig, nextBranchName };
    const releaseTrains = await (0, active_release_trains_1.fetchActiveReleaseTrains)(repo);
    const config = (0, config_1.getConfig)();
    (0, index_1.assertValidReleaseConfig)(config);
    // Print the active release trains.
    await (0, print_active_trains_1.printActiveReleaseTrains)(releaseTrains, config.release);
}
/** CLI command module for retrieving release information. */
exports.ReleaseInfoCommandModule = {
    handler,
    command: 'info',
    describe: 'Prints active release trains to the console.',
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY2xpLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vbmctZGV2L3JlbGVhc2UvaW5mby9jbGkudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBOzs7Ozs7R0FNRzs7O0FBSUgsMkRBQXFEO0FBQ3JELDJDQUF5RDtBQUN6RCwrRUFBNkU7QUFDN0UsMkVBQTJFO0FBQzNFLDhDQUFvRTtBQUNwRSwrQ0FBNkM7QUFFN0MsOERBQThEO0FBQzlELEtBQUssVUFBVSxPQUFPO0lBQ3BCLE1BQU0sR0FBRyxHQUFHLHNCQUFTLENBQUMsR0FBRyxFQUFFLENBQUM7SUFDNUIsTUFBTSxjQUFjLEdBQUcsSUFBQSw4QkFBaUIsRUFBQyxHQUFHLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDO0lBQzVELE1BQU0sSUFBSSxHQUF1QixFQUFDLEdBQUcsRUFBRSxHQUFHLENBQUMsTUFBTSxFQUFFLEdBQUcsR0FBRyxDQUFDLFlBQVksRUFBRSxjQUFjLEVBQUMsQ0FBQztJQUN4RixNQUFNLGFBQWEsR0FBRyxNQUFNLElBQUEsZ0RBQXdCLEVBQUMsSUFBSSxDQUFDLENBQUM7SUFDM0QsTUFBTSxNQUFNLEdBQUcsSUFBQSxrQkFBUyxHQUFFLENBQUM7SUFDM0IsSUFBQSxnQ0FBd0IsRUFBQyxNQUFNLENBQUMsQ0FBQztJQUVqQyxtQ0FBbUM7SUFDbkMsTUFBTSxJQUFBLDhDQUF3QixFQUFDLGFBQWEsRUFBRSxNQUFNLENBQUMsT0FBTyxDQUFDLENBQUM7QUFDaEUsQ0FBQztBQUVELDZEQUE2RDtBQUNoRCxRQUFBLHdCQUF3QixHQUFrQjtJQUNyRCxPQUFPO0lBQ1AsT0FBTyxFQUFFLE1BQU07SUFDZixRQUFRLEVBQUUsOENBQThDO0NBQ3pELENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgR29vZ2xlIExMQyBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IGFuIE1JVC1zdHlsZSBsaWNlbnNlIHRoYXQgY2FuIGJlXG4gKiBmb3VuZCBpbiB0aGUgTElDRU5TRSBmaWxlIGF0IGh0dHBzOi8vYW5ndWxhci5pby9saWNlbnNlXG4gKi9cblxuaW1wb3J0IHtDb21tYW5kTW9kdWxlfSBmcm9tICd5YXJncyc7XG5cbmltcG9ydCB7R2l0Q2xpZW50fSBmcm9tICcuLi8uLi91dGlscy9naXQvZ2l0LWNsaWVudCc7XG5pbXBvcnQge2Fzc2VydFZhbGlkUmVsZWFzZUNvbmZpZ30gZnJvbSAnLi4vY29uZmlnL2luZGV4JztcbmltcG9ydCB7ZmV0Y2hBY3RpdmVSZWxlYXNlVHJhaW5zfSBmcm9tICcuLi92ZXJzaW9uaW5nL2FjdGl2ZS1yZWxlYXNlLXRyYWlucyc7XG5pbXBvcnQge3ByaW50QWN0aXZlUmVsZWFzZVRyYWluc30gZnJvbSAnLi4vdmVyc2lvbmluZy9wcmludC1hY3RpdmUtdHJhaW5zJztcbmltcG9ydCB7Z2V0TmV4dEJyYW5jaE5hbWUsIFJlbGVhc2VSZXBvV2l0aEFwaX0gZnJvbSAnLi4vdmVyc2lvbmluZyc7XG5pbXBvcnQge2dldENvbmZpZ30gZnJvbSAnLi4vLi4vdXRpbHMvY29uZmlnJztcblxuLyoqIFlhcmdzIGNvbW1hbmQgaGFuZGxlciBmb3IgcHJpbnRpbmcgcmVsZWFzZSBpbmZvcm1hdGlvbi4gKi9cbmFzeW5jIGZ1bmN0aW9uIGhhbmRsZXIoKSB7XG4gIGNvbnN0IGdpdCA9IEdpdENsaWVudC5nZXQoKTtcbiAgY29uc3QgbmV4dEJyYW5jaE5hbWUgPSBnZXROZXh0QnJhbmNoTmFtZShnaXQuY29uZmlnLmdpdGh1Yik7XG4gIGNvbnN0IHJlcG86IFJlbGVhc2VSZXBvV2l0aEFwaSA9IHthcGk6IGdpdC5naXRodWIsIC4uLmdpdC5yZW1vdGVDb25maWcsIG5leHRCcmFuY2hOYW1lfTtcbiAgY29uc3QgcmVsZWFzZVRyYWlucyA9IGF3YWl0IGZldGNoQWN0aXZlUmVsZWFzZVRyYWlucyhyZXBvKTtcbiAgY29uc3QgY29uZmlnID0gZ2V0Q29uZmlnKCk7XG4gIGFzc2VydFZhbGlkUmVsZWFzZUNvbmZpZyhjb25maWcpO1xuXG4gIC8vIFByaW50IHRoZSBhY3RpdmUgcmVsZWFzZSB0cmFpbnMuXG4gIGF3YWl0IHByaW50QWN0aXZlUmVsZWFzZVRyYWlucyhyZWxlYXNlVHJhaW5zLCBjb25maWcucmVsZWFzZSk7XG59XG5cbi8qKiBDTEkgY29tbWFuZCBtb2R1bGUgZm9yIHJldHJpZXZpbmcgcmVsZWFzZSBpbmZvcm1hdGlvbi4gKi9cbmV4cG9ydCBjb25zdCBSZWxlYXNlSW5mb0NvbW1hbmRNb2R1bGU6IENvbW1hbmRNb2R1bGUgPSB7XG4gIGhhbmRsZXIsXG4gIGNvbW1hbmQ6ICdpbmZvJyxcbiAgZGVzY3JpYmU6ICdQcmludHMgYWN0aXZlIHJlbGVhc2UgdHJhaW5zIHRvIHRoZSBjb25zb2xlLicsXG59O1xuIl19