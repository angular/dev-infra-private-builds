"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.getGroupsFromYaml = exports.parsePullApproveYaml = void 0;
/**
 * @license
 * Copyright Google LLC All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
const yaml_1 = require("yaml");
const group_1 = require("./group");
function parsePullApproveYaml(rawYaml) {
    return (0, yaml_1.parse)(rawYaml, { merge: true });
}
exports.parsePullApproveYaml = parsePullApproveYaml;
/** Parses all of the groups defined in the pullapprove yaml. */
function getGroupsFromYaml(pullApproveYamlRaw) {
    /** JSON representation of the pullapprove yaml file. */
    const pullApprove = parsePullApproveYaml(pullApproveYamlRaw);
    return Object.entries(pullApprove.groups).reduce((groups, [groupName, group]) => {
        return groups.concat(new group_1.PullApproveGroup(groupName, group, groups));
    }, []);
}
exports.getGroupsFromYaml = getGroupsFromYaml;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicGFyc2UteWFtbC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL25nLWRldi9wdWxsYXBwcm92ZS9wYXJzZS15YW1sLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7OztBQUFBOzs7Ozs7R0FNRztBQUNILCtCQUF3QztBQUN4QyxtQ0FBeUM7QUEyQnpDLFNBQWdCLG9CQUFvQixDQUFDLE9BQWU7SUFDbEQsT0FBTyxJQUFBLFlBQVMsRUFBQyxPQUFPLEVBQUUsRUFBQyxLQUFLLEVBQUUsSUFBSSxFQUFDLENBQXNCLENBQUM7QUFDaEUsQ0FBQztBQUZELG9EQUVDO0FBRUQsZ0VBQWdFO0FBQ2hFLFNBQWdCLGlCQUFpQixDQUFDLGtCQUEwQjtJQUMxRCx3REFBd0Q7SUFDeEQsTUFBTSxXQUFXLEdBQUcsb0JBQW9CLENBQUMsa0JBQWtCLENBQUMsQ0FBQztJQUM3RCxPQUFPLE1BQU0sQ0FBQyxPQUFPLENBQUMsV0FBVyxDQUFDLE1BQU0sQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLE1BQU0sRUFBRSxDQUFDLFNBQVMsRUFBRSxLQUFLLENBQUMsRUFBRSxFQUFFO1FBQzlFLE9BQU8sTUFBTSxDQUFDLE1BQU0sQ0FBQyxJQUFJLHdCQUFnQixDQUFDLFNBQVMsRUFBRSxLQUFLLEVBQUUsTUFBTSxDQUFDLENBQUMsQ0FBQztJQUN2RSxDQUFDLEVBQUUsRUFBd0IsQ0FBQyxDQUFDO0FBQy9CLENBQUM7QUFORCw4Q0FNQyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCBHb29nbGUgTExDIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogVXNlIG9mIHRoaXMgc291cmNlIGNvZGUgaXMgZ292ZXJuZWQgYnkgYW4gTUlULXN0eWxlIGxpY2Vuc2UgdGhhdCBjYW4gYmVcbiAqIGZvdW5kIGluIHRoZSBMSUNFTlNFIGZpbGUgYXQgaHR0cHM6Ly9hbmd1bGFyLmlvL2xpY2Vuc2VcbiAqL1xuaW1wb3J0IHtwYXJzZSBhcyBwYXJzZVlhbWx9IGZyb20gJ3lhbWwnO1xuaW1wb3J0IHtQdWxsQXBwcm92ZUdyb3VwfSBmcm9tICcuL2dyb3VwJztcblxuZXhwb3J0IGludGVyZmFjZSBQdWxsQXBwcm92ZUdyb3VwQ29uZmlnIHtcbiAgY29uZGl0aW9ucz86IHN0cmluZ1tdO1xuICByZXZpZXdlcnM/OlxuICAgIHwge1xuICAgICAgICB1c2Vyczogc3RyaW5nW107XG4gICAgICAgIHRlYW1zPzogc3RyaW5nW107XG4gICAgICB9XG4gICAgfCB7XG4gICAgICAgIHRlYW1zOiBzdHJpbmdbXTtcbiAgICAgIH07XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUHVsbEFwcHJvdmVDb25maWcge1xuICB2ZXJzaW9uOiBudW1iZXI7XG4gIGdpdGh1Yl9hcGlfdmVyc2lvbj86IHN0cmluZztcbiAgcHVsbGFwcHJvdmVfY29uZGl0aW9ucz86IHtcbiAgICBjb25kaXRpb246IHN0cmluZztcbiAgICB1bm1ldF9zdGF0dXM6IHN0cmluZztcbiAgICBleHBsYW5hdGlvbjogc3RyaW5nO1xuICB9W107XG4gIGdyb3Vwczoge1xuICAgIFtrZXk6IHN0cmluZ106IFB1bGxBcHByb3ZlR3JvdXBDb25maWc7XG4gIH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBwYXJzZVB1bGxBcHByb3ZlWWFtbChyYXdZYW1sOiBzdHJpbmcpOiBQdWxsQXBwcm92ZUNvbmZpZyB7XG4gIHJldHVybiBwYXJzZVlhbWwocmF3WWFtbCwge21lcmdlOiB0cnVlfSkgYXMgUHVsbEFwcHJvdmVDb25maWc7XG59XG5cbi8qKiBQYXJzZXMgYWxsIG9mIHRoZSBncm91cHMgZGVmaW5lZCBpbiB0aGUgcHVsbGFwcHJvdmUgeWFtbC4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRHcm91cHNGcm9tWWFtbChwdWxsQXBwcm92ZVlhbWxSYXc6IHN0cmluZyk6IFB1bGxBcHByb3ZlR3JvdXBbXSB7XG4gIC8qKiBKU09OIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBwdWxsYXBwcm92ZSB5YW1sIGZpbGUuICovXG4gIGNvbnN0IHB1bGxBcHByb3ZlID0gcGFyc2VQdWxsQXBwcm92ZVlhbWwocHVsbEFwcHJvdmVZYW1sUmF3KTtcbiAgcmV0dXJuIE9iamVjdC5lbnRyaWVzKHB1bGxBcHByb3ZlLmdyb3VwcykucmVkdWNlKChncm91cHMsIFtncm91cE5hbWUsIGdyb3VwXSkgPT4ge1xuICAgIHJldHVybiBncm91cHMuY29uY2F0KG5ldyBQdWxsQXBwcm92ZUdyb3VwKGdyb3VwTmFtZSwgZ3JvdXAsIGdyb3VwcykpO1xuICB9LCBbXSBhcyBQdWxsQXBwcm92ZUdyb3VwW10pO1xufVxuIl19