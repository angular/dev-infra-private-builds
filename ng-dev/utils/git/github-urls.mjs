"use strict";
/**
 * @license
 * Copyright Google LLC All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
Object.defineProperty(exports, "__esModule", { value: true });
exports.getFileContentsUrl = exports.getListCommitsInBranchUrl = exports.getRepositoryGitUrl = exports.addTokenToGitHttpsUrl = exports.GITHUB_TOKEN_GENERATE_URL = exports.GITHUB_TOKEN_SETTINGS_URL = void 0;
const url_1 = require("url");
/** URL to the Github page where personal access tokens can be managed. */
exports.GITHUB_TOKEN_SETTINGS_URL = 'https://github.com/settings/tokens';
/** URL to the Github page where personal access tokens can be generated. */
exports.GITHUB_TOKEN_GENERATE_URL = 'https://github.com/settings/tokens/new';
/** Adds the provided token to the given Github HTTPs remote url. */
function addTokenToGitHttpsUrl(githubHttpsUrl, token) {
    const url = new url_1.URL(githubHttpsUrl);
    url.username = token;
    return url.href;
}
exports.addTokenToGitHttpsUrl = addTokenToGitHttpsUrl;
/** Gets the repository Git URL for the given github config. */
function getRepositoryGitUrl(config, githubToken) {
    if (config.useSsh) {
        return `git@github.com:${config.owner}/${config.name}.git`;
    }
    const baseHttpUrl = `https://github.com/${config.owner}/${config.name}.git`;
    if (githubToken !== undefined) {
        return addTokenToGitHttpsUrl(baseHttpUrl, githubToken);
    }
    return baseHttpUrl;
}
exports.getRepositoryGitUrl = getRepositoryGitUrl;
/** Gets a Github URL that refers to a list of recent commits within a specified branch. */
function getListCommitsInBranchUrl(client, branchName) {
    const { owner, repo } = client.remoteParams;
    return `https://github.com/${owner}/${repo}/commits/${branchName}`;
}
exports.getListCommitsInBranchUrl = getListCommitsInBranchUrl;
/** Gets a Github URL for viewing the file contents of a specified file for the given ref. */
function getFileContentsUrl(client, ref, relativeFilePath) {
    const { owner, repo } = client.remoteParams;
    return `https://github.com/${owner}/${repo}/blob/${ref}/${relativeFilePath}`;
}
exports.getFileContentsUrl = getFileContentsUrl;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZ2l0aHViLXVybHMuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi9uZy1kZXYvdXRpbHMvZ2l0L2dpdGh1Yi11cmxzLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQTs7Ozs7O0dBTUc7OztBQUVILDZCQUF3QjtBQUt4QiwwRUFBMEU7QUFDN0QsUUFBQSx5QkFBeUIsR0FBRyxvQ0FBb0MsQ0FBQztBQUU5RSw0RUFBNEU7QUFDL0QsUUFBQSx5QkFBeUIsR0FBRyx3Q0FBd0MsQ0FBQztBQUVsRixvRUFBb0U7QUFDcEUsU0FBZ0IscUJBQXFCLENBQUMsY0FBc0IsRUFBRSxLQUFhO0lBQ3pFLE1BQU0sR0FBRyxHQUFHLElBQUksU0FBRyxDQUFDLGNBQWMsQ0FBQyxDQUFDO0lBQ3BDLEdBQUcsQ0FBQyxRQUFRLEdBQUcsS0FBSyxDQUFDO0lBQ3JCLE9BQU8sR0FBRyxDQUFDLElBQUksQ0FBQztBQUNsQixDQUFDO0FBSkQsc0RBSUM7QUFFRCwrREFBK0Q7QUFDL0QsU0FBZ0IsbUJBQW1CLENBQ2pDLE1BQXVELEVBQ3ZELFdBQW9CO0lBRXBCLElBQUksTUFBTSxDQUFDLE1BQU0sRUFBRTtRQUNqQixPQUFPLGtCQUFrQixNQUFNLENBQUMsS0FBSyxJQUFJLE1BQU0sQ0FBQyxJQUFJLE1BQU0sQ0FBQztLQUM1RDtJQUNELE1BQU0sV0FBVyxHQUFHLHNCQUFzQixNQUFNLENBQUMsS0FBSyxJQUFJLE1BQU0sQ0FBQyxJQUFJLE1BQU0sQ0FBQztJQUM1RSxJQUFJLFdBQVcsS0FBSyxTQUFTLEVBQUU7UUFDN0IsT0FBTyxxQkFBcUIsQ0FBQyxXQUFXLEVBQUUsV0FBVyxDQUFDLENBQUM7S0FDeEQ7SUFDRCxPQUFPLFdBQVcsQ0FBQztBQUNyQixDQUFDO0FBWkQsa0RBWUM7QUFFRCwyRkFBMkY7QUFDM0YsU0FBZ0IseUJBQXlCLENBQUMsTUFBaUIsRUFBRSxVQUFrQjtJQUM3RSxNQUFNLEVBQUMsS0FBSyxFQUFFLElBQUksRUFBQyxHQUFHLE1BQU0sQ0FBQyxZQUFZLENBQUM7SUFDMUMsT0FBTyxzQkFBc0IsS0FBSyxJQUFJLElBQUksWUFBWSxVQUFVLEVBQUUsQ0FBQztBQUNyRSxDQUFDO0FBSEQsOERBR0M7QUFFRCw2RkFBNkY7QUFDN0YsU0FBZ0Isa0JBQWtCLENBQUMsTUFBaUIsRUFBRSxHQUFXLEVBQUUsZ0JBQXdCO0lBQ3pGLE1BQU0sRUFBQyxLQUFLLEVBQUUsSUFBSSxFQUFDLEdBQUcsTUFBTSxDQUFDLFlBQVksQ0FBQztJQUMxQyxPQUFPLHNCQUFzQixLQUFLLElBQUksSUFBSSxTQUFTLEdBQUcsSUFBSSxnQkFBZ0IsRUFBRSxDQUFDO0FBQy9FLENBQUM7QUFIRCxnREFHQyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCBHb29nbGUgTExDIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogVXNlIG9mIHRoaXMgc291cmNlIGNvZGUgaXMgZ292ZXJuZWQgYnkgYW4gTUlULXN0eWxlIGxpY2Vuc2UgdGhhdCBjYW4gYmVcbiAqIGZvdW5kIGluIHRoZSBMSUNFTlNFIGZpbGUgYXQgaHR0cHM6Ly9hbmd1bGFyLmlvL2xpY2Vuc2VcbiAqL1xuXG5pbXBvcnQge1VSTH0gZnJvbSAndXJsJztcblxuaW1wb3J0IHtHaXRodWJDb25maWd9IGZyb20gJy4uL2NvbmZpZyc7XG5pbXBvcnQge0dpdENsaWVudH0gZnJvbSAnLi9naXQtY2xpZW50JztcblxuLyoqIFVSTCB0byB0aGUgR2l0aHViIHBhZ2Ugd2hlcmUgcGVyc29uYWwgYWNjZXNzIHRva2VucyBjYW4gYmUgbWFuYWdlZC4gKi9cbmV4cG9ydCBjb25zdCBHSVRIVUJfVE9LRU5fU0VUVElOR1NfVVJMID0gJ2h0dHBzOi8vZ2l0aHViLmNvbS9zZXR0aW5ncy90b2tlbnMnO1xuXG4vKiogVVJMIHRvIHRoZSBHaXRodWIgcGFnZSB3aGVyZSBwZXJzb25hbCBhY2Nlc3MgdG9rZW5zIGNhbiBiZSBnZW5lcmF0ZWQuICovXG5leHBvcnQgY29uc3QgR0lUSFVCX1RPS0VOX0dFTkVSQVRFX1VSTCA9ICdodHRwczovL2dpdGh1Yi5jb20vc2V0dGluZ3MvdG9rZW5zL25ldyc7XG5cbi8qKiBBZGRzIHRoZSBwcm92aWRlZCB0b2tlbiB0byB0aGUgZ2l2ZW4gR2l0aHViIEhUVFBzIHJlbW90ZSB1cmwuICovXG5leHBvcnQgZnVuY3Rpb24gYWRkVG9rZW5Ub0dpdEh0dHBzVXJsKGdpdGh1Ykh0dHBzVXJsOiBzdHJpbmcsIHRva2VuOiBzdHJpbmcpIHtcbiAgY29uc3QgdXJsID0gbmV3IFVSTChnaXRodWJIdHRwc1VybCk7XG4gIHVybC51c2VybmFtZSA9IHRva2VuO1xuICByZXR1cm4gdXJsLmhyZWY7XG59XG5cbi8qKiBHZXRzIHRoZSByZXBvc2l0b3J5IEdpdCBVUkwgZm9yIHRoZSBnaXZlbiBnaXRodWIgY29uZmlnLiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFJlcG9zaXRvcnlHaXRVcmwoXG4gIGNvbmZpZzogUGljazxHaXRodWJDb25maWcsICduYW1lJyB8ICdvd25lcicgfCAndXNlU3NoJz4sXG4gIGdpdGh1YlRva2VuPzogc3RyaW5nLFxuKTogc3RyaW5nIHtcbiAgaWYgKGNvbmZpZy51c2VTc2gpIHtcbiAgICByZXR1cm4gYGdpdEBnaXRodWIuY29tOiR7Y29uZmlnLm93bmVyfS8ke2NvbmZpZy5uYW1lfS5naXRgO1xuICB9XG4gIGNvbnN0IGJhc2VIdHRwVXJsID0gYGh0dHBzOi8vZ2l0aHViLmNvbS8ke2NvbmZpZy5vd25lcn0vJHtjb25maWcubmFtZX0uZ2l0YDtcbiAgaWYgKGdpdGh1YlRva2VuICE9PSB1bmRlZmluZWQpIHtcbiAgICByZXR1cm4gYWRkVG9rZW5Ub0dpdEh0dHBzVXJsKGJhc2VIdHRwVXJsLCBnaXRodWJUb2tlbik7XG4gIH1cbiAgcmV0dXJuIGJhc2VIdHRwVXJsO1xufVxuXG4vKiogR2V0cyBhIEdpdGh1YiBVUkwgdGhhdCByZWZlcnMgdG8gYSBsaXN0IG9mIHJlY2VudCBjb21taXRzIHdpdGhpbiBhIHNwZWNpZmllZCBicmFuY2guICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0TGlzdENvbW1pdHNJbkJyYW5jaFVybChjbGllbnQ6IEdpdENsaWVudCwgYnJhbmNoTmFtZTogc3RyaW5nKSB7XG4gIGNvbnN0IHtvd25lciwgcmVwb30gPSBjbGllbnQucmVtb3RlUGFyYW1zO1xuICByZXR1cm4gYGh0dHBzOi8vZ2l0aHViLmNvbS8ke293bmVyfS8ke3JlcG99L2NvbW1pdHMvJHticmFuY2hOYW1lfWA7XG59XG5cbi8qKiBHZXRzIGEgR2l0aHViIFVSTCBmb3Igdmlld2luZyB0aGUgZmlsZSBjb250ZW50cyBvZiBhIHNwZWNpZmllZCBmaWxlIGZvciB0aGUgZ2l2ZW4gcmVmLiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldEZpbGVDb250ZW50c1VybChjbGllbnQ6IEdpdENsaWVudCwgcmVmOiBzdHJpbmcsIHJlbGF0aXZlRmlsZVBhdGg6IHN0cmluZykge1xuICBjb25zdCB7b3duZXIsIHJlcG99ID0gY2xpZW50LnJlbW90ZVBhcmFtcztcbiAgcmV0dXJuIGBodHRwczovL2dpdGh1Yi5jb20vJHtvd25lcn0vJHtyZXBvfS9ibG9iLyR7cmVmfS8ke3JlbGF0aXZlRmlsZVBhdGh9YDtcbn1cbiJdfQ==