{
  "version": 3,
  "sources": ["../../../../../../../../ng-dev/pr/merge/strategies/commit-message-filter.ts"],
  "sourcesContent": ["#!/usr/bin/env node\n\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\n/**\n * Script that can be passed as commit message filter to `git filter-branch --msg-filter`.\n * The script rewrites commit messages to contain a Github instruction to close the\n * corresponding pull request. For more details. See: https://git.io/Jv64r.\n */\n\nmain();\n\nfunction main() {\n  const [prNumber] = process.argv.slice(2);\n  if (!prNumber) {\n    console.error('No pull request number specified.');\n    process.exit(1);\n  }\n\n  let commitMessage = '';\n  process.stdin.setEncoding('utf8');\n  process.stdin.on('readable', () => {\n    const chunk = process.stdin.read();\n    if (chunk !== null) {\n      commitMessage += chunk;\n    }\n  });\n\n  process.stdin.on('end', () => {\n    console.info(rewriteCommitMessage(commitMessage, prNumber));\n  });\n}\n\nfunction rewriteCommitMessage(message: string, prNumber: string) {\n  const lines = message.split(/\\n/);\n  // Add the pull request number to the commit message title. This matches what\n  // Github does when PRs are merged on the web through the `Squash and Merge` button.\n  lines[0] += ` (#${prNumber})`;\n  // Push a new line that instructs Github to close the specified pull request.\n  lines.push(`PR Close #${prNumber}`);\n  return lines.join('\\n');\n}\n"],
  "mappings": ";;;;;;;AAEA,AAcA,KAAI;AAEJ,gBAAa;AACX,QAAM,CAAC,YAAY,QAAQ,KAAK,MAAM,CAAC;AACvC,MAAI,CAAC,UAAU;AACb,YAAQ,MAAM,mCAAmC;AACjD,YAAQ,KAAK,CAAC;;AAGhB,MAAI,gBAAgB;AACpB,UAAQ,MAAM,YAAY,MAAM;AAChC,UAAQ,MAAM,GAAG,YAAY,MAAK;AAChC,UAAM,QAAQ,QAAQ,MAAM,KAAI;AAChC,QAAI,UAAU,MAAM;AAClB,uBAAiB;;EAErB,CAAC;AAED,UAAQ,MAAM,GAAG,OAAO,MAAK;AAC3B,YAAQ,KAAK,qBAAqB,eAAe,QAAQ,CAAC;EAC5D,CAAC;AACH;AAEA,8BAA8B,SAAiB,UAAgB;AAC7D,QAAM,QAAQ,QAAQ,MAAM,IAAI;AAGhC,QAAM,MAAM,MAAM;AAElB,QAAM,KAAK,aAAa,UAAU;AAClC,SAAO,MAAM,KAAK,IAAI;AACxB;",
  "names": []
}
