{
  "version": 3,
  "sources": ["../../../../../../../../ng-dev/pr/merge/strategies/commit-message-filter.ts"],
  "sourcesContent": ["#!/usr/bin/env node\n\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\n/**\n * Script that can be passed as commit message filter to `git filter-branch --msg-filter`.\n * The script rewrites commit messages to contain a Github instruction to close the\n * corresponding pull request. For more details. See: https://git.io/Jv64r.\n */\n\nif (require.main === module) {\n  const [prNumber] = process.argv.slice(2);\n  if (!prNumber) {\n    console.error('No pull request number specified.');\n    process.exit(1);\n  }\n\n  let commitMessage = '';\n  process.stdin.setEncoding('utf8');\n  process.stdin.on('readable', () => {\n    const chunk = process.stdin.read();\n    if (chunk !== null) {\n      commitMessage += chunk;\n    }\n  });\n\n  process.stdin.on('end', () => {\n    console.info(rewriteCommitMessage(commitMessage, prNumber));\n  });\n}\n\nfunction rewriteCommitMessage(message: string, prNumber: string) {\n  const lines = message.split(/\\n/);\n  // Add the pull request number to the commit message title. This matches what\n  // Github does when PRs are merged on the web through the `Squash and Merge` button.\n  lines[0] += ` (#${prNumber})`;\n  // Push a new line that instructs Github to close the specified pull request.\n  lines.push(`PR Close #${prNumber}`);\n  return lines.join('\\n');\n}\n"],
  "mappings": ";;;;;;;;;;;;;;AAEA,AAcA,QAAI,UAAQ,SAAS,QAAQ;AAC3B,YAAM,CAAC,YAAY,QAAQ,KAAK,MAAM,CAAC;AACvC,UAAI,CAAC,UAAU;AACb,gBAAQ,MAAM,mCAAmC;AACjD,gBAAQ,KAAK,CAAC;;AAGhB,UAAI,gBAAgB;AACpB,cAAQ,MAAM,YAAY,MAAM;AAChC,cAAQ,MAAM,GAAG,YAAY,MAAK;AAChC,cAAM,QAAQ,QAAQ,MAAM,KAAI;AAChC,YAAI,UAAU,MAAM;AAClB,2BAAiB;;MAErB,CAAC;AAED,cAAQ,MAAM,GAAG,OAAO,MAAK;AAC3B,gBAAQ,KAAK,qBAAqB,eAAe,QAAQ,CAAC;MAC5D,CAAC;;AAGH,kCAA8B,SAAiB,UAAgB;AAC7D,YAAM,QAAQ,QAAQ,MAAM,IAAI;AAGhC,YAAM,MAAM,MAAM;AAElB,YAAM,KAAK,aAAa,UAAU;AAClC,aAAO,MAAM,KAAK,IAAI;IACxB;;;",
  "names": []
}
